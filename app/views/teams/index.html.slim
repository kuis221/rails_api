.row-fluid
  #resource-index-container.no-calendars.span12
    .pull-right
      #resource-filter-column
        .text-right
          = link_to 'Create a team', new_team_path, {remote: true, class: 'btn btn-primary'}
        #collection-list-filters

    table#teams-list.table.table-striped.table-bordered.table-scrolled
      thead
        tr
          th data-sort="name" Teams
          th Number of Members
          th data-sort="description" Description
          th data-sort="active" Status
          th
      tbody


javascript:
  $('#collection-list-filters').filterBox({
    'includeSearchBox': false,
    'includeAutoComplete': true,
    'autoCompletePath': '#{autocomplete_teams_path(format: :json)}',
    'defaultParams': [{name: 'status[]', value: 'Active'}],
    'onChange': function(filterBox){
      if (typeof teamsTable != 'undefined')
        teamsTable.tableScroller('reloadData');
    }
  });

  var teamsTable = $('table#teams-list').tableScroller({
    'source': '#{teams_path(format: :json)}',
    'filterBox': '#collection-list-filters',
    'fixedHeader': true,
    'rowValues': function(t){
      return [t.name, t.users_count, t.description, t.status]
    },
    'onItemsChange': function(items) {
      $(document).trigger('teams-list:changed', [items]);
    },
    'rowId': function(row){
      return 'team_'+row.id;
    },
    'headerOffset': 91
  })